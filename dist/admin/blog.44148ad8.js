var t=globalThis,e={},a={},l=t.parcelRequire06c3;null==l&&((l=function(t){if(t in e)return e[t].exports;if(t in a){var l=a[t];delete a[t];var d={id:t,exports:{}};return e[t]=d,l.call(d.exports,d,d.exports),d.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){a[t]=e},t.parcelRequire06c3=l),(0,l.register)("e5SIn",function(t,e){Object.defineProperty(t.exports,"default",{get:()=>d,set:void 0,enumerable:!0,configurable:!0});var a=l("fmRoT"),d=class{constructor(t){this.collectionName="blog",this.endPoint=t}getBlog=async()=>(await (0,a.default).get(this.endPoint+this.collectionName)).data;addBlog=async t=>(await (0,a.default).post(this.endPoint+this.collectionName,t)).data;deleteBlog=async t=>(await (0,a.default).delete(`${this.endPoint}${this.collectionName}/${t}`)).data;getBlogById=async t=>(await (0,a.default).get(this.endPoint+this.collectionName+"/"+t)).data;editBlog=async(t,e)=>{try{return(await (0,a.default).put(`${this.endPoint}${this.collectionName}/${t}`,e)).data}catch(t){console.log(t)}};getlastId=async()=>{try{let t=(await (0,a.default).get(`${this.endPoint}${this.collectionName}`)).data;if(0===t.length)return"0";return(parseInt(t[t.length-1].id,10)+1).toString()}catch(t){console.log(t)}}}});var d=l("e5SIn"),o=l("3610C");const n=new d.default(o.default.EndPoint),i=document.querySelector("#showBlog");let c=null;function r(t){let e=`<tr>
  <td>${t.id}</td>
  <td>${t.title}</td>
  <td style="width: 120px;"><img src="${t.image}" alt="" /></td>
  <td>${t.description}</td>
  <td>
    <div class="edit-auth">
      <a href="#" class="edit-btn" data-id="${t.id}">Edit</a>
      <a href="#" class="delete-btn" data-id="${t.id}">Delete</a>
    </div>
  </td>
</tr>`;i.insertAdjacentHTML("beforeend",e)}async function s(t){c=await n.getBlogById(t),document.getElementById("titleUpdate").value=c.title,document.getElementById("imageUpdate").value=c.image,document.getElementById("descUpdate").value=c.description,document.getElementById("blogId").value=t,showEditForm()}document.querySelector(".form-blog-post").addEventListener("submit",async t=>{t.preventDefault();let e=document.getElementById("title").value,a=document.getElementById("image").value,l=document.getElementById("desc").value;console.log(e);try{let t=await n.getlastId(),d=await n.addBlog({id:t,title:e,image:a,description:l});r(d),closeModal()}catch(t){console.log(t)}}),i.addEventListener("click",async t=>{if(t.target.matches(".delete-btn")){let e=t.target.getAttribute("data-id");await n.deleteBlog(e),t.target.closest("tr").remove()}else if(t.target.matches(".edit-btn")){let e=t.target.getAttribute("data-id");try{s(e)}catch(t){console.log(t)}}}),document.querySelector("#formEditBlog").addEventListener("submit",async t=>{t.preventDefault();let e=document.getElementById("titleUpdate").value,a=document.getElementById("imageUpdate").value,l=document.getElementById("descUpdate").value,d=document.getElementById("blogId").value;try{let t=await n.editBlog(d,{title:e,image:a,description:l});closeModalUpdate(),r(t),location.reload(!0)}catch(t){console.log(t)}}),n.getBlog().then(t=>{console.log(t),t.forEach(t=>{r(t)})});
//# sourceMappingURL=blog.44148ad8.js.map
